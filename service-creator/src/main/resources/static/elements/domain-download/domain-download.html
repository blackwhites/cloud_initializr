<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

</head><body><dom-module id="domain-download">

  
  <template>
    <style is="custom-style">:host{display:block;padding:16px;}paper-button.custom{--paper-button-ink-color:var(--paper-pink-a200);--paper-button-flat-keyboard-focus:{background-color:var(--paper-pink-a200);color:white !important;};--paper-button-raised-keyboard-focus:{background-color:var(--paper-pink-a200) !important;color:white !important;};}paper-button.custom:hover{background-color:var(--paper-indigo-100);}paper-button.green{background-color:var(--paper-green-500);color:white;}</style>
    <iron-ajax id="ajax" url="http://localhost:8080/zip/" handle-as="blob" content-type="application/json" method="POST" body="[[domain]]" on-response="handleResponse" debounce-duration="3000">
 </iron-ajax>
 <paper-button toggles="" raised="" on-tap="setajax" class="custom green">
    <iron-icon icon="image:wb-cloudy" style="padding-right: 10px"></iron-icon>build your cloud now
  </paper-button>
  <paper-toast id="toast1" text="You should give your domain a name like 'My Domain'."></paper-toast>
  <paper-toast id="toast2" text="You should give your domain a base path like 'com.example'."></paper-toast>
  <paper-toast id="toast3" text="At least one service would be useful. :)"></paper-toast>
  </template>

  
  <script>Polymer({is:"domain-download",properties:{domain:{type:Object,notify:!0}},setajax:function(){this.checkPayload()&&this.$.ajax.generateRequest()},checkPayload:function(){return"undefined"==typeof this.domain.name||""==this.domain.name?(this.$.toast1.open(),!1):"undefined"==typeof this.domain.path||""==this.domain.path?(this.$.toast2.open(),!1):"undefined"==typeof this.domain.services||this.domain.services.length<1?(this.$.toast3.open(),!1):!0},handleResponse:function(e){var n=e.detail.response;console.log(e.detail.response);var t=window.URL.createObjectURL(n);window.location.assign(t)}});</script>

</dom-module>
</body></html>